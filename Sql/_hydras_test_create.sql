CREATE OR REPLACE FUNCTION public._hydras_test_create() returns void AS
$$
DECLARE
    TEMPSTR VARCHAR;
    
-- Create 19 avril 2020
--
-- SCRIPT creation base de tes agrhys @2020 Adam Mario Inrae mario.adam@inrae.fr
--


BEGIN
    DROP SCHEMA IF exists test CASCADE;

    CREATE SCHEMA test    
        CREATE TABLE tests_results (test text, result boolean);

    SET search_path = test;

    SHOW search_path INTO TEMPSTR;

    SELECT public._hydras_create_table('logsImports') INTO TEMPSTR;

    SELECT public._hydras_create_table('data') INTO TEMPSTR;

    INSERT INTO data (keyid, station_id, sensor_id, date_record, raw_data, validate_data)
    VALUES 	('71199804022000', 7, 1, '1998-04-02 00:00:00', null, null),
            ('71201201100030', 7, 1, '2012-01-10 00:30:00', -0.999, null),
            ('71200202020000', 7, 1, '02/02/2002 00:00:00', 20, null),
            ('71200202021200', 7, 1, '02/02/2002 00:12:00', 25, 50),
            ('729201201100115', 7, 29, '2012-01-10 01:15:00', -0.999, 50)            
            ,('11202001010015',1,1,'2020-01-01 00:15:00.000',0.018,1.018)
            ,('11202001010030',1,1,'2020-01-01 00:30:00.000',0.019,NULL)
            ,('11202001010045',1,1,'2020-01-01 00:45:00.000',0.019,NULL)
            ,('11202001010100',1,1,'2020-01-01 01:00:00.000',0.02,NULL)
            ,('11202001010115',1,1,'2020-01-01 01:15:00.000',0.021,NULL)
            ,('11202001010130',1,1,'2020-01-01 01:30:00.000',0.021,NULL)
            ,('11202001010145',1,1,'2020-01-01 01:45:00.000',0.021,NULL)
            ,('11202001010200',1,1,'2020-01-01 02:00:00.000',0.021,NULL)
            ,('11202001010215',1,1,'2020-01-01 02:15:00.000',0.021,NULL)
            ,('11202001010230',1,1,'2020-01-01 02:30:00.000',0.021,NULL)
            ,('11202001010245',1,1,'2020-01-01 02:45:00.000',0.021,NULL)
            ,('11202001010300',1,1,'2020-01-01 03:00:00.000',0.021,NULL)
            ,('11202001010315',1,1,'2020-01-01 03:15:00.000',0.021,NULL)
            ,('11202001010330',1,1,'2020-01-01 03:30:00.000',0.021,NULL)
            ,('11202001010345',1,1,'2020-01-01 03:45:00.000',0.021,NULL)
            ,('11202001010400',1,1,'2020-01-01 04:00:00.000',0.022,NULL)
            ,('11202001010415',1,1,'2020-01-01 04:15:00.000',0.021,NULL)
            ,('11202001010430',1,1,'2020-01-01 04:30:00.000',0.021,NULL)
            ,('11202001010445',1,1,'2020-01-01 04:45:00.000',0.022,NULL)
            ,('11202001010500',1,1,'2020-01-01 05:00:00.000',0.022,NULL)
            ,('11202001010515',1,1,'2020-01-01 05:15:00.000',0.023,NULL)
            ,('11202001010530',1,1,'2020-01-01 05:30:00.000',0.022,NULL)
            ,('11202001010545',1,1,'2020-01-01 05:45:00.000',0.022,NULL)
            ,('11202001010600',1,1,'2020-01-01 06:00:00.000',0.021,NULL)
            ,('11202001010615',1,1,'2020-01-01 06:15:00.000',0.021,NULL)
            ,('11202001010630',1,1,'2020-01-01 06:30:00.000',0.021,NULL)
            ,('11202001010645',1,1,'2020-01-01 06:45:00.000',0.02,NULL)
            ,('11202001010700',1,1,'2020-01-01 07:00:00.000',0.02,NULL)
            ,('11202001010715',1,1,'2020-01-01 07:15:00.000',0.021,NULL)
            ,('11202001010730',1,1,'2020-01-01 07:30:00.000',0.02,NULL)
            ,('11202001010745',1,1,'2020-01-01 07:45:00.000',0.02,NULL)
            ,('11202001010800',1,1,'2020-01-01 08:00:00.000',0.02,NULL)
            ,('11202001010815',1,1,'2020-01-01 08:15:00.000',0.019,NULL)
            ,('11202001010830',1,1,'2020-01-01 08:30:00.000',0.019,NULL)
            ,('11202001010845',1,1,'2020-01-01 08:45:00.000',0.019,NULL)
            ,('11202001010900',1,1,'2020-01-01 09:00:00.000',0.019,NULL)
            ,('11202001010915',1,1,'2020-01-01 09:15:00.000',0.019,NULL)
            ,('11202001010930',1,1,'2020-01-01 09:30:00.000',0.018,NULL)
            ,('11202001010945',1,1,'2020-01-01 09:45:00.000',0.019,NULL)
            ,('11202001011000',1,1,'2020-01-01 10:00:00.000',0.018,NULL)
            ,('11202001011015',1,1,'2020-01-01 10:15:00.000',0.018,NULL)
            ,('11202001011030',1,1,'2020-01-01 10:30:00.000',0.018,NULL)
            ,('11202001011045',1,1,'2020-01-01 10:45:00.000',0.018,NULL)
            ,('11202001011100',1,1,'2020-01-01 11:00:00.000',0.019,NULL)
            ,('11202001011115',1,1,'2020-01-01 11:15:00.000',0.019,NULL)
            ,('11202001011130',1,1,'2020-01-01 11:30:00.000',0.02,NULL)
            ,('11202001011145',1,1,'2020-01-01 11:45:00.000',0.02,NULL)
            ,('11202001011200',1,1,'2020-01-01 12:00:00.000',0.021,NULL)
            ,('11202001011215',1,1,'2020-01-01 12:15:00.000',0.021,NULL)
            ,('11202001011230',1,1,'2020-01-01 12:30:00.000',0.022,NULL)
            ,('11202001011245',1,1,'2020-01-01 12:45:00.000',0.022,NULL)
            ,('11202001011300',1,1,'2020-01-01 13:00:00.000',0.022,NULL)
            ,('11202001011315',1,1,'2020-01-01 13:15:00.000',0.023,NULL)
            ,('11202001011330',1,1,'2020-01-01 13:30:00.000',0.023,NULL)
            ,('11202001011345',1,1,'2020-01-01 13:45:00.000',0.023,NULL)
            ,('11202001011400',1,1,'2020-01-01 14:00:00.000',0.023,NULL)
            ,('11202001011415',1,1,'2020-01-01 14:15:00.000',0.023,NULL)
            ,('11202001011430',1,1,'2020-01-01 14:30:00.000',0.023,NULL)
            ,('11202001011445',1,1,'2020-01-01 14:45:00.000',0.022,NULL)
            ,('11202001011500',1,1,'2020-01-01 15:00:00.000',0.022,NULL)
            ,('11202001011515',1,1,'2020-01-01 15:15:00.000',0.021,NULL)
            ,('11202001011530',1,1,'2020-01-01 15:30:00.000',0.021,NULL)
            ,('11202001011545',1,1,'2020-01-01 15:45:00.000',0.021,NULL)
            ,('11202001011600',1,1,'2020-01-01 16:00:00.000',0.021,NULL)
            ,('11202001011615',1,1,'2020-01-01 16:15:00.000',0.02,NULL)
            ,('11202001011630',1,1,'2020-01-01 16:30:00.000',0.02,NULL)
            ,('11202001011645',1,1,'2020-01-01 16:45:00.000',0.02,NULL)
            ,('11202001011700',1,1,'2020-01-01 17:00:00.000',0.02,NULL)
            ,('11202001011715',1,1,'2020-01-01 17:15:00.000',0.02,NULL)
            ,('11202001011730',1,1,'2020-01-01 17:30:00.000',0.019,NULL)
            ,('11202001011745',1,1,'2020-01-01 17:45:00.000',0.02,NULL)
            ,('11202001011800',1,1,'2020-01-01 18:00:00.000',0.02,NULL)
            ,('11202001011815',1,1,'2020-01-01 18:15:00.000',0.02,NULL)
            ,('11202001011830',1,1,'2020-01-01 18:30:00.000',0.02,NULL)
            ,('11202001011845',1,1,'2020-01-01 18:45:00.000',0.019,NULL)
            ,('11202001011900',1,1,'2020-01-01 19:00:00.000',0.019,NULL)
            ,('11202001011915',1,1,'2020-01-01 19:15:00.000',0.019,NULL)
            ,('11202001011930',1,1,'2020-01-01 19:30:00.000',0.019,NULL)
            ,('11202001011945',1,1,'2020-01-01 19:45:00.000',0.019,NULL)
            ,('11202001012000',1,1,'2020-01-01 20:00:00.000',0.019,NULL)
            ,('11202001012015',1,1,'2020-01-01 20:15:00.000',0.02,NULL)
            ,('11202001012030',1,1,'2020-01-01 20:30:00.000',0.019,NULL)
            ,('11202001012045',1,1,'2020-01-01 20:45:00.000',0.019,NULL)
            ,('11202001012100',1,1,'2020-01-01 21:00:00.000',0.019,NULL)
            ,('11202001012115',1,1,'2020-01-01 21:15:00.000',0.019,NULL)
            ,('11202001012130',1,1,'2020-01-01 21:30:00.000',0.019,NULL)
            ,('11202001012145',1,1,'2020-01-01 21:45:00.000',0.019,NULL)
            ,('11202001012200',1,1,'2020-01-01 22:00:00.000',0.02,NULL)
            ,('11202001012215',1,1,'2020-01-01 22:15:00.000',0.02,NULL)
            ,('11202001012230',1,1,'2020-01-01 22:30:00.000',0.02,NULL)
            ,('11202001012245',1,1,'2020-01-01 22:45:00.000',0.02,NULL)
            ,('11202001012300',1,1,'2020-01-01 23:00:00.000',0.02,NULL)
            ,('11202001012315',1,1,'2020-01-01 23:15:00.000',0.02,NULL)
            ,('11202001012330',1,1,'2020-01-01 23:30:00.000',0.02,NULL)
            ,('11202001012345',1,1,'2020-01-01 23:45:00.000',0.02,NULL)
            ,('11202001020000',1,1,'2020-01-02 00:00:00.000',0.02,NULL)
            ,('11202001020015',1,1,'2020-01-02 00:15:00.000',0.02,NULL)
            ,('11202001020030',1,1,'2020-01-02 00:30:00.000',0.02,NULL)
            ,('11202001020045',1,1,'2020-01-02 00:45:00.000',0.02,NULL)
            ,('11202001020100',1,1,'2020-01-02 01:00:00.000',0.02,NULL)
            ,('11202001020115',1,1,'2020-01-02 01:15:00.000',0.02,NULL)
            ,('11202001020130',1,1,'2020-01-02 01:30:00.000',0.02,NULL)
            ,('11202001020145',1,1,'2020-01-02 01:45:00.000',0.02,NULL)
            ,('11202001020200',1,1,'2020-01-02 02:00:00.000',0.019,NULL)
            ,('11202001020215',1,1,'2020-01-02 02:15:00.000',0.019,NULL)
            ,('11202001020230',1,1,'2020-01-02 02:30:00.000',0.019,NULL)
            ,('11202001020245',1,1,'2020-01-02 02:45:00.000',0.019,NULL)
            ,('11202001020300',1,1,'2020-01-02 03:00:00.000',0.02,NULL)
            ,('11202001020315',1,1,'2020-01-02 03:15:00.000',0.02,NULL)
            ,('11202001020330',1,1,'2020-01-02 03:30:00.000',0.019,NULL)
            ,('11202001020345',1,1,'2020-01-02 03:45:00.000',0.02,NULL)
            ,('11202001020400',1,1,'2020-01-02 04:00:00.000',0.02,NULL)
            ,('11202001020415',1,1,'2020-01-02 04:15:00.000',0.021,NULL)
            ,('11202001020430',1,1,'2020-01-02 04:30:00.000',0.021,NULL)
            ,('11202001020445',1,1,'2020-01-02 04:45:00.000',0.021,NULL)
            ,('11202001020500',1,1,'2020-01-02 05:00:00.000',0.021,NULL)
            ,('11202001020515',1,1,'2020-01-02 05:15:00.000',0.02,NULL)
            ,('11202001020530',1,1,'2020-01-02 05:30:00.000',0.02,NULL)
            ,('11202001020545',1,1,'2020-01-02 05:45:00.000',0.02,NULL)
            ,('11202001020600',1,1,'2020-01-02 06:00:00.000',0.02,NULL)
            ,('11202001020615',1,1,'2020-01-02 06:15:00.000',0.02,NULL)
            ,('11202001020630',1,1,'2020-01-02 06:30:00.000',0.019,NULL)
            ,('11202001020645',1,1,'2020-01-02 06:45:00.000',0.019,NULL)
            ,('11202001020700',1,1,'2020-01-02 07:00:00.000',0.019,NULL)
            ,('11202001020715',1,1,'2020-01-02 07:15:00.000',0.019,NULL)
            ,('11202001020730',1,1,'2020-01-02 07:30:00.000',0.019,NULL)
            ,('11202001020745',1,1,'2020-01-02 07:45:00.000',0.018,NULL)
            ,('11202001020800',1,1,'2020-01-02 08:00:00.000',0.018,NULL)
            ,('11202001020815',1,1,'2020-01-02 08:15:00.000',0.018,NULL)
            ,('11202001020830',1,1,'2020-01-02 08:30:00.000',0.018,NULL)
            ,('11202001020845',1,1,'2020-01-02 08:45:00.000',0.017,NULL)
            ,('11202001020900',1,1,'2020-01-02 09:00:00.000',0.017,NULL)
            ,('11202001020915',1,1,'2020-01-02 09:15:00.000',0.017,NULL)
            ,('11202001020930',1,1,'2020-01-02 09:30:00.000',0.017,NULL)
            ,('11202001020945',1,1,'2020-01-02 09:45:00.000',0.016,NULL)
            ,('11202001021000',1,1,'2020-01-02 10:00:00.000',0.016,NULL)
            ,('11202001021015',1,1,'2020-01-02 10:15:00.000',0.016,NULL)
            ,('11202001021030',1,1,'2020-01-02 10:30:00.000',0.016,NULL)
            ,('11202001021045',1,1,'2020-01-02 10:45:00.000',0.016,NULL)
            ,('11202001021100',1,1,'2020-01-02 11:00:00.000',0.017,NULL)
            ,('11202001021115',1,1,'2020-01-02 11:15:00.000',0.017,NULL)
            ,('11202001021130',1,1,'2020-01-02 11:30:00.000',0.018,NULL)
            ,('11202001021145',1,1,'2020-01-02 11:45:00.000',0.019,NULL)
            ,('11202001021200',1,1,'2020-01-02 12:00:00.000',0.019,NULL)
            ,('11202001021215',1,1,'2020-01-02 12:15:00.000',0.02,NULL)
            ,('11202001021230',1,1,'2020-01-02 12:30:00.000',0.021,NULL)
            ,('11202001021245',1,1,'2020-01-02 12:45:00.000',0.021,NULL)
            ,('11202001021300',1,1,'2020-01-02 13:00:00.000',0.021,NULL)
            ,('11202001021315',1,1,'2020-01-02 13:15:00.000',0.021,NULL)
            ,('11202001021330',1,1,'2020-01-02 13:30:00.000',0.021,NULL)
            ,('11202001021345',1,1,'2020-01-02 13:45:00.000',0.021,NULL)
            ,('11202001021400',1,1,'2020-01-02 14:00:00.000',0.021,NULL)
            ,('11202001021415',1,1,'2020-01-02 14:15:00.000',0.021,NULL)
            ,('11202001021430',1,1,'2020-01-02 14:30:00.000',0.021,NULL)
            ,('11202001021445',1,1,'2020-01-02 14:45:00.000',0.021,NULL)
            ,('11202001021500',1,1,'2020-01-02 15:00:00.000',0.02,NULL)
            ,('11202001021515',1,1,'2020-01-02 15:15:00.000',0.02,NULL)
            ,('11202001021530',1,1,'2020-01-02 15:30:00.000',0.02,NULL)
            ,('11202001021545',1,1,'2020-01-02 15:45:00.000',0.02,NULL)
            ,('11202001021600',1,1,'2020-01-02 16:00:00.000',0.019,NULL)
            ,('11202001021615',1,1,'2020-01-02 16:15:00.000',0.019,NULL)
            ,('11202001021630',1,1,'2020-01-02 16:30:00.000',0.019,NULL)
            ,('11202001021645',1,1,'2020-01-02 16:45:00.000',0.019,NULL)
            ,('11202001021700',1,1,'2020-01-02 17:00:00.000',0.019,NULL)
            ,('11202001021715',1,1,'2020-01-02 17:15:00.000',0.018,NULL)
            ,('11202001021730',1,1,'2020-01-02 17:30:00.000',0.017,NULL)
            ,('11202001021745',1,1,'2020-01-02 17:45:00.000',0.017,NULL)
            ,('11202001021800',1,1,'2020-01-02 18:00:00.000',0.016,NULL)
            ,('11202001021815',1,1,'2020-01-02 18:15:00.000',0.017,NULL)
            ,('11202001021830',1,1,'2020-01-02 18:30:00.000',0.016,NULL)
            ,('11202001021845',1,1,'2020-01-02 18:45:00.000',0.016,NULL)
            ,('11202001021900',1,1,'2020-01-02 19:00:00.000',0.016,NULL)
            ,('11202001021915',1,1,'2020-01-02 19:15:00.000',0.016,NULL)
            ,('11202001021930',1,1,'2020-01-02 19:30:00.000',0.015,NULL)
            ,('11202001021945',1,1,'2020-01-02 19:45:00.000',0.015,NULL)
            ,('11202001022000',1,1,'2020-01-02 20:00:00.000',0.015,NULL)
            ,('11202001022015',1,1,'2020-01-02 20:15:00.000',0.015,NULL)
            ,('11202001022030',1,1,'2020-01-02 20:30:00.000',0.015,NULL)
            ,('11202001022045',1,1,'2020-01-02 20:45:00.000',0.015,NULL)
            ,('11202001022100',1,1,'2020-01-02 21:00:00.000',0.015,NULL)
            ,('11202001022115',1,1,'2020-01-02 21:15:00.000',0.014,NULL)
            ,('11202001022130',1,1,'2020-01-02 21:30:00.000',0.015,NULL)
            ,('11202001022145',1,1,'2020-01-02 21:45:00.000',0.015,NULL)
            ,('11202001022200',1,1,'2020-01-02 22:00:00.000',0.014,NULL)
            ,('11202001022215',1,1,'2020-01-02 22:15:00.000',0.014,NULL)
            ,('11202001022230',1,1,'2020-01-02 22:30:00.000',0.014,NULL)
            ,('11202001022245',1,1,'2020-01-02 22:45:00.000',0.014,NULL)
            ,('11202001022300',1,1,'2020-01-02 23:00:00.000',0.014,NULL)
            ,('11202001022315',1,1,'2020-01-02 23:15:00.000',0.014,NULL)
            ,('11202001022330',1,1,'2020-01-02 23:30:00.000',0.014,NULL)
            ,('11202001022345',1,1,'2020-01-02 23:45:00.000',0.014,NULL)
            ,('11202001030000',1,1,'2020-01-03 00:00:00.000',0.015,NULL)
            ,('11202001030015',1,1,'2020-01-03 00:15:00.000',0.016,NULL)
            ,('11202001030030',1,1,'2020-01-03 00:30:00.000',0.016,NULL)
            ,('11202001030045',1,1,'2020-01-03 00:45:00.000',0.017,NULL)
            ,('11202001030100',1,1,'2020-01-03 01:00:00.000',0.017,NULL)
            ,('11202001030115',1,1,'2020-01-03 01:15:00.000',0.016,NULL)
            ,('11202001030130',1,1,'2020-01-03 01:30:00.000',0.016,NULL)
            ,('11202001030145',1,1,'2020-01-03 01:45:00.000',0.016,NULL)
            ,('11202001030200',1,1,'2020-01-03 02:00:00.000',0.015,NULL)
            ,('11202003031200',1,1,'2020-03-03 12:00:00.000',0.998,NULL);
                       

    SELECT public._hydras_create_table('data_update') INTO TEMPSTR; 

    INSERT INTO data_update (keyid, "date", value)
    VALUES 	('71200202021200','2002-03-04 16:00:00',30),  
    		('71200202021200','2002-12-12 18:30:00',60), 
    		('71200202021200','2003-02-02 02:15:00',90); 

    SELECT public._hydras_create_table('area') INTO TEMPSTR;

    INSERT INTO area (id, code, displayName) VALUES (1, 'TEST_AREA', 'Zone de test');		

    SELECT public._hydras_create_table('station') INTO TEMPSTR;
    INSERT INTO station (id, area_id, name) VALUES  (1, 1, 'Test de boa'),
                                                            (2, 1, 'Test de pont'),
                                                            (3, 1, 'Test o sterone'),
                                                            (4, 1, 'Test a rossa'),
                                                            (5, 1, 'test de gossesse'),
                                                            (6, 1, 'test imonial'),
                                                            (7, 1, 'test amant'),
                                                            (8, 1, 'test de resistance'),
                                                            (9, 1, 'test de test');

    SELECT public._hydras_create_table('sensor') INTO TEMPSTR;
    INSERT INTO sensor (code, name, unite) VALUES  ('0101', 'Niveau Nappe', 'm'),
                                                    ('0102', 'Niveau Cours d''eau', 'm'),
                                                    ('0103', 'Vitesse Cours d''eau', 'm/s'),
                                                    ('0104', 'Débit', 'l/s'),
                                                    ('0105', 'Débit de base', 'L.s-1'),
                                                    ('0108', 'Niveau Nappe sur 24h', 'm'),
                                                    ('0109', 'Niveau manuel Nappe', 'm'),
                                                    ('0111', 'Gradient hydraulique', '%'),
                                                    ('0112', 'Niveau Cours d''eau 15 min', 'm'),
                                                    ('0115', 'Niveau Cours d''eau manuel', 'm'),
                                                    ('0120', 'Pression sommet tensio (-25cm)', ''),
                                                    ('0121', 'Pression sommet tensio (-50cm)', ''),
                                                    ('0122', 'Pression sommet tensio (-100cm)', ''),
                                                    ('0123', 'Pression sommet tensio (-150cm)', ''),
                                                    ('0124', 'Pression sommet tensio (-200cm)', ''),
                                                    ('0125', 'Pression sommet tensio (-250cm)', ''),
                                                    ('0130', 'Pression capillaire (-25cm)', ''),
                                                    ('0131', 'Pression capillaire (-50cm)', ''),
                                                    ('0132', 'Pression capillaire (-100cm)', ''),
                                                    ('0133', 'Pression capillaire (-150cm)', ''),
                                                    ('0134', 'Pression capillaire (-200cm)', ''),
                                                    ('0135', 'Pression capillaire (-250cm)', ''),
                                                    ('0140', 'Charge totale (-25cm)', ''),
                                                    ('0141', 'Charge totale (-50cm)', ''),
                                                    ('0142', 'Charge totale (-100cm)', ''),
                                                    ('0143', 'Charge totale (-150cm)', ''),
                                                    ('0144', 'Charge totale (-200cm)', ''),
                                                    ('0145', 'Charge totale (-250cm)', ''),
                                                    ('0201', 'Température de l''eau', '°C'),
                                                    ('0202', 'Température de l''air', '°C');


END;
$$
LANGUAGE plpgsql;

